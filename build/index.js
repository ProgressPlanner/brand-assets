(()=>{"use strict";const e=window.wp.blocks,t=window.wp.element,s=window.wp.blockEditor,a=window.wp.components,r=window.wp.i18n,o=window.wp.data,n=window.ReactJSXRuntime,l=e=>{const t=e.replace("#","");return.2126*parseInt(t.substring(0,2),16)+.7152*parseInt(t.substring(2,4),16)+.0722*parseInt(t.substring(4,6),16)<128},c=e=>{const t=parseInt(e.substring(1,3),16)/255,s=parseInt(e.substring(3,5),16)/255,a=parseInt(e.substring(5,7),16)/255,r=1-Math.max(t,s,a),o=(1-t-r)/(1-r)||0,n=(1-s-r)/(1-r)||0,l=(1-a-r)/(1-r)||0;return`${Math.round(100*o)},${Math.round(100*n)},${Math.round(100*l)},${Math.round(100*r)}`},i=e=>{const t=e.replace("#","");return.2126*parseInt(t.substring(0,2),16)+.7152*parseInt(t.substring(2,4),16)+.0722*parseInt(t.substring(4,6),16)<128},d=e=>{const t=e.replace("#","");return.2126*parseInt(t.substring(0,2),16)+.7152*parseInt(t.substring(2,4),16)+.0722*parseInt(t.substring(4,6),16)<128},h=e=>{const t=parseInt(e.substring(1,3),16)/255,s=parseInt(e.substring(3,5),16)/255,a=parseInt(e.substring(5,7),16)/255,r=1-Math.max(t,s,a),o=(1-t-r)/(1-r)||0,n=(1-s-r)/(1-r)||0,l=(1-a-r)/(1-r)||0;return`${Math.round(100*o)},${Math.round(100*n)},${Math.round(100*l)},${Math.round(100*r)}`},u=[{attributes:{swatches:{type:"array",default:[]},swatchWidth:{type:"number",default:150},swatchHeight:{type:"number",default:150},swatchGap:{type:"number",default:20},borderWidth:{type:"number",default:1},borderRadius:{type:"number",default:0},borderColor:{type:"string",default:"#888888"},showCMYK:{type:"boolean",default:!1}},save({attributes:e}){const{swatches:t,swatchWidth:a,swatchHeight:r,swatchGap:o,borderWidth:l,borderRadius:c,borderColor:i}=e;return(0,n.jsx)("div",{...s.useBlockProps.save(),children:(0,n.jsx)("div",{style:{"--gapWidth":`${o}px`,"--swatchWidth":`${a}px`,"--swatchHeight":`${r}px`,"--borderWidth":`${l}px`,"--borderRadius":`${c}px`,"--borderColor":`${i}`},className:"swatch_container",children:t.map(((e,t)=>(0,n.jsxs)("div",{className:"swatch"+(d(e.color)?" dark":""),style:{"--swatchColor":`${e.color}`},children:[(0,n.jsx)("span",{className:"name",children:e.name}),(0,n.jsx)("code",{children:e.color.toUpperCase()})]},t)))})})},migrate(e){const t=e.swatches.map((e=>!e.cmyk&&e.color?{...e,cmyk:h(e.color)}:e));return{...e,swatches:t}}}],p=JSON.parse('{"apiVersion":2,"name":"brand-assets/brand-assets","title":"Color Palette - Brand Assets","icon":"art","category":"design","description":"A block that displays your brand color palette with customizable swatches and styling options.","supports":{"align":true},"attributes":{"swatches":{"type":"array","default":[]},"swatchWidth":{"type":"number","default":150},"swatchHeight":{"type":"number","default":150},"swatchGap":{"type":"number","default":20},"borderWidth":{"type":"number","default":1},"borderRadius":{"type":"number","default":0},"borderColor":{"type":"string","default":"#888888"},"showCMYK":{"type":"boolean","default":false}},"editorScript":"file:./index.js","editorStyle":"file:../assets/editor-style.css","style":"file:../assets/style.css"}');(0,e.registerBlockType)(p.name,{...p,edit:function({attributes:e,setAttributes:i,clientId:d}){const{swatches:h,swatchWidth:u,swatchHeight:p,swatchGap:b,borderWidth:m,borderRadius:w,borderColor:g,showCMYK:x}=e,[y,C]=(0,t.useState)(0),[j,k]=(0,t.useState)(!0),_=(0,o.useSelect)((e=>e("core/block-editor").getSettings()?.colors||[]),[]),f=(0,o.useSelect)((e=>e("core/block-editor").getBlockSelectionStart()===d),[d]);(0,t.useEffect)((()=>{if(0===h.length){const e=(e=>e&&e.length>0?e.map(((e,t)=>({name:e.name||`Color ${t+1}`,color:e.color,cmyk:c(e.color)}))):[{name:"Red",color:"#E63027",cmyk:"0,79,83,10"},{name:"Green",color:"#008000",cmyk:"100,0,100,50"},{name:"Black",color:"#000000",cmyk:"0,0,0,100"}])(_);i({swatches:e})}}),[h.length,i,_]),(0,t.useEffect)((()=>{if(0!==h.length&&h.some((e=>!e.cmyk&&e.color))){const e=h.map((e=>!e.cmyk&&e.color?{...e,cmyk:c(e.color)}:e));i({swatches:e})}}),[]);const v=(e,t)=>{const s=[...h];s[e]=t,i({swatches:s})},$=(t,s)=>{console.log("Updating dimensions:",t,s),"both"===s?(i({swatchWidth:t,swatchHeight:t}),M=Math.max(t,e.borderRadius)/2):(i({[s]:t}),M=Math.max(e.swatchHeight,e.swatchWidth)/2)};let M=Math.max(e.swatchHeight,e.swatchWidth)/2;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsx)("div",{style:{padding:"16px"},children:(0,n.jsx)(a.ToggleControl,{style:{marginLeft:"10px"},label:(0,r.__)("Show CMYK values","brand-assets"),checked:x,onChange:()=>i({showCMYK:!x})})}),(0,n.jsxs)(a.PanelBody,{title:(0,r.__)("Swatch dimensions","brand-assets"),initialOpen:!1,children:[j?(0,n.jsx)(a.RangeControl,{label:(0,r.__)("Swatch size","brand-assets"),value:u,onChange:e=>$(e,"both"),min:50,max:300}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.RangeControl,{label:(0,r.__)("Swatch width","brand-assets"),value:u,onChange:e=>$(e,"swatchWidth"),min:50,max:300}),(0,n.jsx)(a.RangeControl,{label:(0,r.__)("Swatch height","brand-assets"),value:p,onChange:e=>$(e,"swatchHeight"),min:50,max:300})]}),(0,n.jsx)(a.ToggleControl,{label:(0,r.__)("Link swatch width & height","brand-assets"),checked:j,onChange:()=>k(!j)}),(0,n.jsx)(a.RangeControl,{label:(0,r.__)("Gap between colors","brand-assets"),value:b,onChange:e=>i({swatchGap:e}),min:0,max:10})]}),(0,n.jsxs)(a.PanelBody,{title:(0,r.__)("Border settings","brand-assets"),initialOpen:!1,children:[(0,n.jsx)(a.RangeControl,{label:(0,r.__)("Border width","brand-assets"),value:m,onChange:e=>i({borderWidth:e}),min:0,max:10}),(0,n.jsx)(a.RangeControl,{label:(0,r.__)("Border radius","brand-assets"),value:w,onChange:e=>i({borderRadius:e}),min:0,max:M}),m>0&&(0,n.jsx)(a.ColorPalette,{value:g,colors:[{name:"White",color:"#FFFFFF"},{name:"Light Gray",color:"#F0F0F0"},{name:"Gray",color:"#888888"},{name:"Dark Gray",color:"#444444"},{name:"Black",color:"#000000"}],label:(0,r.__)("Border color","brand-assets"),onChange:e=>{console.log("New border color:",e),i({borderColor:e})},disableAlpha:!0})]}),(0,n.jsx)(a.PanelBody,{title:(0,r.__)("Edit Swatch","brand-assets"),children:h[y]&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.TextControl,{label:(0,r.__)("Color Name","brand-assets"),value:h[y].name,onChange:e=>v(y,{...h[y],name:e})}),(0,n.jsx)(a.ColorPalette,{value:h[y].color,onChange:e=>{const t=c(e);v(y,{...h[y],color:e,cmyk:t})}}),x&&(0,n.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("label",{htmlFor:`cmyk-input-${y}`,children:(0,r.__)("CMYK Values","brand-assets")}),(0,n.jsx)(a.Button,{isLink:!0,className:"calculate",onClick:()=>{const e=c(h[y].color);v(y,{...h[y],cmyk:e})},children:(0,r.__)("Calculate","brand-assets")})]}),(0,n.jsx)(a.TextControl,{id:`cmyk-input-${y}`,value:h[y].cmyk,onChange:e=>v(y,{...h[y],cmyk:e})})]})]})})]}),(0,n.jsx)("div",{...(0,s.useBlockProps)(),children:(0,n.jsxs)("div",{style:{"--gapWidth":`${b}px`,"--swatchWidth":`${u}px`,"--swatchHeight":`${p}px`,"--borderWidth":`${m}px`,"--borderRadius":`${w}px`,"--borderColor":`${g}`},className:"swatch_container",children:[h.map(((e,t)=>{const s=f&&y===t?" focus":"";return(0,n.jsxs)("div",{className:"swatch"+(l(e.color)?" dark":"")+s,style:{"--swatchColor":`${e.color}`},onClick:()=>C(t),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),C(t))},tabIndex:0,role:"button","aria-label":(0,r.__)("Select swatch","brand-assets")+": "+e.name,children:[(0,n.jsx)("span",{className:"name",children:e.name}),(0,n.jsx)("code",{children:e.color.toUpperCase()}),x&&e.cmyk&&(0,n.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk}),f&&h.length>1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{const t=h.filter(((t,s)=>s!==e));i({swatches:t}),C(Math.max(0,e-1))})(t)},className:"delete","aria-label":(0,r.__)("Delete Swatch","brand-assets"),children:"Ã—"}),(0,n.jsxs)("div",{className:"move-controls",children:[(0,n.jsx)(a.Button,{icon:"arrow-left-alt2",label:(0,r.__)("Move Left","brand-assets"),onClick:e=>{if(e.stopPropagation(),t>0){const e=[...h];[e[t-1],e[t]]=[e[t],e[t-1]],i({swatches:e}),C(t-1)}},isSmall:!0}),(0,n.jsx)(a.Button,{icon:"arrow-right-alt2",label:(0,r.__)("Move Right","brand-assets"),onClick:e=>{if(e.stopPropagation(),t<h.length-1){const e=[...h];[e[t+1],e[t]]=[e[t],e[t+1]],i({swatches:e}),C(t+1)}},isSmall:!0})]})]})]},t)})),(0,n.jsxs)(a.Button,{isSecondary:!0,onClick:()=>{const e={name:"New Color",color:"#000000",cmyk:c("#000000")},t=[...h,e];i({swatches:t}),C(t.length-1)},className:"add_swatch",children:["+ ",(0,r.__)("Add Swatch","brand-assets")]})]})})]})},save:function({attributes:e}){const{swatches:t,swatchWidth:a,swatchHeight:r,swatchGap:o,borderWidth:l,borderRadius:c,borderColor:d,showCMYK:h}=e;return(0,n.jsx)("div",{...s.useBlockProps.save(),children:(0,n.jsx)("div",{style:{"--gapWidth":`${o}px`,"--swatchWidth":`${a}px`,"--swatchHeight":`${r}px`,"--borderWidth":`${l}px`,"--borderRadius":`${c}px`,"--borderColor":`${d}`},className:"swatch_container",children:t.map(((e,t)=>(0,n.jsxs)("div",{className:"swatch"+(i(e.color)?" dark":""),style:{"--swatchColor":`${e.color}`},children:[(0,n.jsx)("span",{className:"name",children:e.name}),(0,n.jsx)("code",{children:e.color.toUpperCase()}),h&&e.cmyk&&(0,n.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk})]},t)))})})},deprecated:u})})();