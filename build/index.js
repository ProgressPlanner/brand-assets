(()=>{"use strict";const e=window.wp.blocks,s=window.wp.element,t=window.wp.blockEditor,a=window.wp.components,o=window.wp.i18n,n=window.wp.data,r=window.ReactJSXRuntime,l=e=>{const s=e.replace("#","");return.2126*parseInt(s.substring(0,2),16)+.7152*parseInt(s.substring(2,4),16)+.0722*parseInt(s.substring(4,6),16)<128},c=e=>{const s=parseInt(e.substring(1,3),16)/255,t=parseInt(e.substring(3,5),16)/255,a=parseInt(e.substring(5,7),16)/255,o=1-Math.max(s,t,a),n=(1-s-o)/(1-o)||0,r=(1-t-o)/(1-o)||0,l=(1-a-o)/(1-o)||0;return`${Math.round(100*n)},${Math.round(100*r)},${Math.round(100*l)},${Math.round(100*o)}`},i=e=>{const s=e.replace("#","");return.2126*parseInt(s.substring(0,2),16)+.7152*parseInt(s.substring(2,4),16)+.0722*parseInt(s.substring(4,6),16)<128},d=JSON.parse('{"apiVersion":2,"name":"brand-assets/brand-assets","title":"Color Palette - Brand Assets","icon":"art","category":"design","description":"A block that displays your brand color palette with customizable swatches and styling options.","supports":{"align":true},"attributes":{"swatches":{"type":"array","default":[]},"swatchWidth":{"type":"number","default":150},"swatchHeight":{"type":"number","default":150},"swatchGap":{"type":"number","default":20},"borderWidth":{"type":"number","default":1},"borderRadius":{"type":"number","default":0},"borderColor":{"type":"string","default":"#888888"},"showCMYK":{"type":"boolean","default":false}},"editorScript":"file:./index.js","editorStyle":"file:../assets/editor-style.css","style":"file:../assets/style.css"}');(0,e.registerBlockType)(d.name,{...d,edit:function({attributes:e,setAttributes:i,clientId:d}){const{swatches:h,swatchWidth:m,swatchHeight:b,swatchGap:p,borderWidth:u,borderRadius:w,borderColor:g,showCMYK:x}=e,[y,C]=(0,s.useState)(0),[j,k]=(0,s.useState)(!0),_=(0,n.useSelect)((e=>e("core/block-editor").getSettings()?.colors||[]),[]),f=(0,n.useSelect)((e=>e("core/block-editor").getBlockSelectionStart()===d),[d]);(0,s.useEffect)((()=>{if(0===h.length){const e=(e=>e&&e.length>0?e.map(((e,s)=>({name:e.name||`Color ${s+1}`,color:e.color,cmyk:c(e.color)}))):[{name:"Red",color:"#E63027",cmyk:"0,79,83,10"},{name:"Green",color:"#008000",cmyk:"100,0,100,50"},{name:"Black",color:"#000000",cmyk:"0,0,0,100"}])(_);i({swatches:e})}}),[h.length,i,_]),(0,s.useEffect)((()=>{if(0!==h.length&&h.some((e=>!e.cmyk&&e.color))){const e=h.map((e=>!e.cmyk&&e.color?{...e,cmyk:c(e.color)}:e));i({swatches:e})}}),[]);const v=(e,s)=>{const t=[...h];t[e]=s,i({swatches:t})},S=(s,t)=>{console.log("Updating dimensions:",s,t),"both"===t?(i({swatchWidth:s,swatchHeight:s}),$=Math.max(s,e.borderRadius)/2):(i({[t]:s}),$=Math.max(e.swatchHeight,e.swatchWidth)/2)};let $=Math.max(e.swatchHeight,e.swatchWidth)/2;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.InspectorControls,{children:[(0,r.jsx)("div",{style:{padding:"16px"},children:(0,r.jsx)(a.ToggleControl,{style:{marginLeft:"10px"},label:(0,o.__)("Show CMYK values","brand-assets"),checked:x,onChange:()=>i({showCMYK:!x})})}),(0,r.jsxs)(a.PanelBody,{title:(0,o.__)("Swatch dimensions","brand-assets"),initialOpen:!1,children:[j?(0,r.jsx)(a.RangeControl,{label:(0,o.__)("Swatch size","brand-assets"),value:m,onChange:e=>S(e,"both"),min:50,max:300}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.RangeControl,{label:(0,o.__)("Swatch width","brand-assets"),value:m,onChange:e=>S(e,"swatchWidth"),min:50,max:300}),(0,r.jsx)(a.RangeControl,{label:(0,o.__)("Swatch height","brand-assets"),value:b,onChange:e=>S(e,"swatchHeight"),min:50,max:300})]}),(0,r.jsx)(a.ToggleControl,{label:(0,o.__)("Link swatch width & height","brand-assets"),checked:j,onChange:()=>k(!j)}),(0,r.jsx)(a.RangeControl,{label:(0,o.__)("Gap between colors","brand-assets"),value:p,onChange:e=>i({swatchGap:e}),min:0,max:10})]}),(0,r.jsxs)(a.PanelBody,{title:(0,o.__)("Border settings","brand-assets"),initialOpen:!1,children:[(0,r.jsx)(a.RangeControl,{label:(0,o.__)("Border width","brand-assets"),value:u,onChange:e=>i({borderWidth:e}),min:0,max:10}),(0,r.jsx)(a.RangeControl,{label:(0,o.__)("Border radius","brand-assets"),value:w,onChange:e=>i({borderRadius:e}),min:0,max:$}),u>0&&(0,r.jsx)(a.ColorPalette,{value:g,colors:[{name:"White",color:"#FFFFFF"},{name:"Light Gray",color:"#F0F0F0"},{name:"Gray",color:"#888888"},{name:"Dark Gray",color:"#444444"},{name:"Black",color:"#000000"}],label:(0,o.__)("Border color","brand-assets"),onChange:e=>{console.log("New border color:",e),i({borderColor:e})},disableAlpha:!0})]}),(0,r.jsx)(a.PanelBody,{title:(0,o.__)("Edit Swatch","brand-assets"),children:h[y]&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.TextControl,{label:(0,o.__)("Color Name","brand-assets"),value:h[y].name,onChange:e=>v(y,{...h[y],name:e})}),(0,r.jsx)(a.ColorPalette,{value:h[y].color,onChange:e=>{const s=c(e);v(y,{...h[y],color:e,cmyk:s})}}),x&&(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("label",{htmlFor:`cmyk-input-${y}`,children:(0,o.__)("CMYK Values","brand-assets")}),(0,r.jsx)(a.Button,{isLink:!0,className:"calculate",onClick:()=>{const e=c(h[y].color);v(y,{...h[y],cmyk:e})},children:(0,o.__)("Calculate","brand-assets")})]}),(0,r.jsx)(a.TextControl,{id:`cmyk-input-${y}`,value:h[y].cmyk,onChange:e=>v(y,{...h[y],cmyk:e})})]})]})})]}),(0,r.jsx)("div",{...(0,t.useBlockProps)(),children:(0,r.jsxs)("div",{style:{"--gapWidth":`${p}px`,"--swatchWidth":`${m}px`,"--swatchHeight":`${b}px`,"--borderWidth":`${u}px`,"--borderRadius":`${w}px`,"--borderColor":`${g}`},className:"swatch_container",children:[h.map(((e,s)=>{const t=f&&y===s?" focus":"";return(0,r.jsxs)("div",{className:"swatch"+(l(e.color)?" dark":"")+t,style:{"--swatchColor":`${e.color}`},onClick:()=>C(s),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),C(s))},tabIndex:0,role:"button","aria-label":(0,o.__)("Select swatch","brand-assets")+": "+e.name,children:[(0,r.jsx)("span",{className:"name",children:e.name}),(0,r.jsx)("code",{children:e.color.toUpperCase()}),x&&e.cmyk&&(0,r.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk}),f&&h.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{const s=h.filter(((s,t)=>t!==e));i({swatches:s}),C(Math.max(0,e-1))})(s)},className:"delete","aria-label":(0,o.__)("Delete Swatch","brand-assets"),children:"Ã—"}),(0,r.jsxs)("div",{className:"move-controls",children:[(0,r.jsx)(a.Button,{icon:"arrow-left-alt2",label:(0,o.__)("Move Left","brand-assets"),onClick:e=>{if(e.stopPropagation(),s>0){const e=[...h];[e[s-1],e[s]]=[e[s],e[s-1]],i({swatches:e}),C(s-1)}},isSmall:!0}),(0,r.jsx)(a.Button,{icon:"arrow-right-alt2",label:(0,o.__)("Move Right","brand-assets"),onClick:e=>{if(e.stopPropagation(),s<h.length-1){const e=[...h];[e[s+1],e[s]]=[e[s],e[s+1]],i({swatches:e}),C(s+1)}},isSmall:!0})]})]})]},s)})),(0,r.jsxs)(a.Button,{isSecondary:!0,onClick:()=>{const e={name:"New Color",color:"#000000",cmyk:c("#000000")},s=[...h,e];i({swatches:s}),C(s.length-1)},className:"add_swatch",children:["+ ",(0,o.__)("Add Swatch","brand-assets")]})]})})]})},save:function({attributes:e}){const{swatches:s,swatchWidth:a,swatchHeight:o,swatchGap:n,borderWidth:l,borderRadius:c,borderColor:d,showCMYK:h}=e;return(0,r.jsx)("div",{...t.useBlockProps.save(),children:(0,r.jsx)("div",{style:{"--gapWidth":`${n}px`,"--swatchWidth":`${a}px`,"--swatchHeight":`${o}px`,"--borderWidth":`${l}px`,"--borderRadius":`${c}px`,"--borderColor":`${d}`},className:"swatch_container",children:s.map(((e,s)=>(0,r.jsxs)("div",{className:"swatch"+(i(e.color)?" dark":""),style:{"--swatchColor":`${e.color}`},children:[(0,r.jsx)("span",{className:"name",children:e.name}),(0,r.jsx)("code",{children:e.color.toUpperCase()}),h&&e.cmyk&&(0,r.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk})]},s)))})})}})})();