(()=>{"use strict";const e=window.wp.blocks,o=window.wp.element,t=window.wp.blockEditor,s=window.wp.components,a=window.wp.i18n,l=window.wp.data,r=window.ReactJSXRuntime,c=e=>{const o=e.replace("#","");return.2126*parseInt(o.substring(0,2),16)+.7152*parseInt(o.substring(2,4),16)+.0722*parseInt(o.substring(4,6),16)<128},n=e=>{const o=parseInt(e.substring(1,3),16)/255,t=parseInt(e.substring(3,5),16)/255,s=parseInt(e.substring(5,7),16)/255,a=1-Math.max(o,t,s),l=(1-o-a)/(1-a)||0,r=(1-t-a)/(1-a)||0,c=(1-s-a)/(1-a)||0;return`${Math.round(100*l)},${Math.round(100*r)},${Math.round(100*c)},${Math.round(100*a)}`},i=e=>{const o=e.replace("#","");return.2126*parseInt(o.substring(0,2),16)+.7152*parseInt(o.substring(2,4),16)+.0722*parseInt(o.substring(4,6),16)<128},h=JSON.parse('{"apiVersion":2,"name":"my-plugin/color-scheme","title":"Color Scheme","icon":"art","category":"design","description":"A block that displays a color scheme of your choice.","supports":{"align":true},"attributes":{"swatches":{"type":"array","default":[]},"swatchWidth":{"type":"number","default":150},"swatchHeight":{"type":"number","default":150},"swatchGap":{"type":"number","default":20},"borderWidth":{"type":"number","default":1},"borderRadius":{"type":"number","default":0},"borderColor":{"type":"string","default":"#888888"},"showCMYK":{"type":"boolean","default":false}},"editorScript":"file:./index.js","editorStyle":"file:../assets/editor-style.css","style":"file:../assets/style.css"}');(0,e.registerBlockType)(h.name,{...h,edit:function({attributes:e,setAttributes:i,clientId:h}){const{swatches:d,swatchWidth:m,swatchHeight:u,swatchGap:p,borderWidth:w,borderRadius:g,borderColor:x,showCMYK:b}=e,[C,y]=(0,o.useState)(0),[j,_]=(0,o.useState)(!0),k=(0,l.useSelect)((e=>e("core/block-editor").getSettings()?.colors||[]),[]),f=(0,l.useSelect)((e=>e("core/block-editor").getBlockSelectionStart()===h),[h]);(0,o.useEffect)((()=>{if(0===d.length){const e=(e=>e&&e.length>0?e.map(((e,o)=>({name:e.name||`Color ${o+1}`,color:e.color,cmyk:n(e.color)}))):[{name:"Red",color:"#E63027",cmyk:"0,79,83,10"},{name:"Green",color:"#008000",cmyk:"100,0,100,50"},{name:"Black",color:"#000000",cmyk:"0,0,0,100"}])(k);i({swatches:e})}}),[d.length,i,k]);const v=(e,o)=>{const t=[...d];t[e]=o,i({swatches:t})},S=(o,t)=>{console.log("Updating dimensions:",o,t),"both"===t?(i({swatchWidth:o,swatchHeight:o}),$=Math.max(o,e.borderRadius)/2):(i({[t]:o}),$=Math.max(e.swatchHeight,e.swatchWidth)/2)};let $=Math.max(e.swatchHeight,e.swatchWidth)/2;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.InspectorControls,{children:[(0,r.jsx)("div",{style:{padding:"16px"},children:(0,r.jsx)(s.ToggleControl,{style:{marginLeft:"10px"},label:(0,a.__)("Show CMYK values","color-scheme"),checked:b,onChange:()=>i({showCMYK:!b})})}),(0,r.jsxs)(s.PanelBody,{title:(0,a.__)("Swatch dimensions","color-scheme"),initialOpen:!1,children:[j?(0,r.jsx)(s.RangeControl,{label:(0,a.__)("Swatch size","color-scheme"),value:m,onChange:e=>S(e,"both"),min:50,max:300}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.RangeControl,{label:(0,a.__)("Swatch width","color-scheme"),value:m,onChange:e=>S(e,"swatchWidth"),min:50,max:300}),(0,r.jsx)(s.RangeControl,{label:(0,a.__)("Swatch height","color-scheme"),value:u,onChange:e=>S(e,"swatchHeight"),min:50,max:300})]}),(0,r.jsx)(s.ToggleControl,{label:(0,a.__)("Link swatch width & height","color-scheme"),checked:j,onChange:()=>_(!j)}),(0,r.jsx)(s.RangeControl,{label:(0,a.__)("Gap between colors","color-scheme"),value:p,onChange:e=>i({swatchGap:e}),min:0,max:10})]}),(0,r.jsxs)(s.PanelBody,{title:(0,a.__)("Border settings","color-scheme"),initialOpen:!1,children:[(0,r.jsx)(s.RangeControl,{label:(0,a.__)("Border width","color-scheme"),value:w,onChange:e=>i({borderWidth:e}),min:0,max:10}),(0,r.jsx)(s.RangeControl,{label:(0,a.__)("Border radius","color-scheme"),value:g,onChange:e=>i({borderRadius:e}),min:0,max:$}),w>0&&(0,r.jsx)(s.ColorPalette,{value:x,colors:[{name:"White",color:"#FFFFFF"},{name:"Light Gray",color:"#F0F0F0"},{name:"Gray",color:"#888888"},{name:"Dark Gray",color:"#444444"},{name:"Black",color:"#000000"}],label:(0,a.__)("Border color","color-scheme"),onChange:e=>{console.log("New border color:",e),i({borderColor:e})},disableAlpha:!0})]}),(0,r.jsx)(s.PanelBody,{title:(0,a.__)("Edit Swatch","color-scheme"),children:d[C]&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.TextControl,{label:(0,a.__)("Color Name","color-scheme"),value:d[C].name,onChange:e=>v(C,{...d[C],name:e})}),(0,r.jsx)(s.ColorPalette,{value:d[C].color,onChange:e=>v(C,{...d[C],color:e})}),b&&(0,r.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("label",{htmlFor:`cmyk-input-${C}`,children:(0,a.__)("CMYK Values","color-scheme")}),(0,r.jsx)(s.Button,{isLink:!0,className:"calculate",onClick:()=>{const e=n(d[C].color);v(C,{...d[C],cmyk:e})},children:(0,a.__)("Calculate","color-scheme")})]}),(0,r.jsx)(s.TextControl,{id:`cmyk-input-${C}`,value:d[C].cmyk,onChange:e=>v(C,{...d[C],cmyk:e})})]})]})})]}),(0,r.jsx)("div",{...(0,t.useBlockProps)(),children:(0,r.jsxs)("div",{style:{"--gapWidth":`${p}px`,"--swatchWidth":`${m}px`,"--swatchHeight":`${u}px`,"--borderWidth":`${w}px`,"--borderRadius":`${g}px`,"--borderColor":`${x}`},className:"swatch_container",children:[d.map(((e,o)=>{const t=f&&C===o?" focus":"";return(0,r.jsxs)("div",{className:"swatch"+(c(e.color)?" dark":"")+t,style:{"--swatchColor":`${e.color}`},onClick:()=>y(o),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),y(o))},tabIndex:0,role:"button","aria-label":(0,a.__)("Select swatch","color-scheme")+": "+e.name,children:[(0,r.jsx)("span",{className:"name",children:e.name}),(0,r.jsx)("code",{children:e.color.toUpperCase()}),b&&(0,r.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk}),f&&d.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{const o=d.filter(((o,t)=>t!==e));i({swatches:o}),y(Math.max(0,e-1))})(o)},className:"delete","aria-label":(0,a.__)("Delete Swatch","color-scheme"),children:"Ã—"}),(0,r.jsxs)("div",{className:"move-controls",children:[(0,r.jsx)(s.Button,{icon:"arrow-left-alt2",label:(0,a.__)("Move Left","color-scheme"),onClick:e=>{if(e.stopPropagation(),o>0){const e=[...d];[e[o-1],e[o]]=[e[o],e[o-1]],i({swatches:e}),y(o-1)}},isSmall:!0}),(0,r.jsx)(s.Button,{icon:"arrow-right-alt2",label:(0,a.__)("Move Right","color-scheme"),onClick:e=>{if(e.stopPropagation(),o<d.length-1){const e=[...d];[e[o+1],e[o]]=[e[o],e[o+1]],i({swatches:e}),y(o+1)}},isSmall:!0})]})]})]},o)})),(0,r.jsxs)(s.Button,{isSecondary:!0,onClick:()=>{const e=[...d,{name:"New Color",color:"#000000"}];i({swatches:e}),y(e.length-1)},className:"add_swatch",children:["+ ",(0,a.__)("Add Swatch","color-scheme")]})]})})]})},save:function({attributes:e}){const{swatches:o,swatchWidth:s,swatchHeight:a,swatchGap:l,borderWidth:c,borderRadius:n,borderColor:h}=e;return(0,r.jsx)("div",{...t.useBlockProps.save(),children:(0,r.jsx)("div",{style:{"--gapWidth":`${l}px`,"--swatchWidth":`${s}px`,"--swatchHeight":`${a}px`,"--borderWidth":`${c}px`,"--borderRadius":`${n}px`,"--borderColor":`${h}`},className:"swatch_container",children:o.map(((e,o)=>(0,r.jsxs)("div",{className:"swatch"+(i(e.color)?" dark":""),style:{"--swatchColor":`${e.color}`},children:[(0,r.jsx)("span",{className:"name",children:e.name}),(0,r.jsx)("code",{children:e.color.toUpperCase()}),e.showCMYK&&(0,r.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk})]},o)))})})}})})();